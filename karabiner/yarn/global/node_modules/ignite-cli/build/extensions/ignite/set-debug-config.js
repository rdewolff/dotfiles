"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var exit_codes_1 = require("../../lib/exit-codes");
exports.default = (function (toolbox) {
    /**
     * Sets Debug Config setting
     */
    function setDebugConfig(key, value, isVariableName) {
        if (isVariableName === void 0) { isVariableName = false; }
        var filesystem = toolbox.filesystem, ignite = toolbox.ignite, print = toolbox.print;
        var patching = ignite.patching;
        var debugConfig = process.cwd() + "/App/Config/DebugConfig.js";
        if (!filesystem.exists(debugConfig)) {
            var msg = 'No `App/Config/DebugConfig.js` file found in this folder, are you sure it is an Ignite CLI project?';
            print.error(msg);
            process.exit(exit_codes_1.default.GENERIC);
        }
        if (patching.isInFile(debugConfig, key)) {
            if (isVariableName) {
                patching.replaceInFile(debugConfig, key, "  " + key + ": " + value + ",");
            }
            else {
                patching.replaceInFile(debugConfig, key, "  " + key + ": '" + value + ",'");
            }
        }
        else {
            if (isVariableName) {
                ignite.patchInFile(debugConfig, {
                    after: 'export default {',
                    insert: "  " + key + ": " + value + ",",
                });
            }
            else {
                ignite.patchInFile(debugConfig, {
                    after: 'export default {',
                    insert: "  " + key + ": '" + value + "',",
                });
            }
        }
    }
    return setDebugConfig;
});
//# sourceMappingURL=set-debug-config.js.map